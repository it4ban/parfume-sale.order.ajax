// @ts-nocheck
class YandexMap{constructor({location:e,apiKey:t}){this.map=void 0,this.marker=void 0,this.locationCoords=void 0,this.locationString=void 0,this.apiKey=t,this.#e(e).then((e=>{this.locationCoords=e,this.#t()})).catch((e=>console.error(e)))}async#t(){await ymaps3.ready;const{YMap:e,YMapDefaultSchemeLayer:t,YMapDefaultFeaturesLayer:r,YMapMarker:o,YMapListener:a}=ymaps3;this.map=new e(document.querySelector("#courierMap"),{location:{center:this.locationCoords,zoom:10}},[new t({}),new r({})]),this.marker=new o({coordinates:this.locationCoords},this.#r()),this.map.addChild(this.marker);const i=new a({onClick:(e,t)=>this.#o(e,t)});this.map.addChild(i)}#o(e,t){const r=t.coordinates;r&&(this.#a(),this.#i(r),this.#s(r).then((e=>{this.locationString=e,console.log(this.locationString)})).catch((e=>console.error(e))))}#a(){this.marker&&(this.map.removeChild(this.marker),this.marker=void 0)}#i(e){this.marker=new ymaps3.YMapMarker({coordinates:e},this.#r()),this.map.addChild(this.marker)}#r(){const e=document.createElement("div");return e.style.width="20px",e.style.height="20px",e.style.background="red",e.style.borderRadius="50%",e.style.transform="translate(-50%, -50%)",e.style.border="2px solid white",e}async#e(e){try{const t=await fetch(`https://geocode-maps.yandex.ru/v1/?apikey=${this.apiKey}&geocode=${encodeURIComponent(e)}&format=json`).then((e=>e.json())),r=t?.response?.GeoObjectCollection?.featureMember?.[0]?.GeoObject?.Point?.pos;return r?r.split(" ").map(Number):[37.62,55.75]}catch(e){return console.error(e),[37.62,55.75]}}async#s(e){try{e[0],e[1];return{}}catch(e){return console.error(e),null}}}